{"version":3,"file":"bundle.js","sources":["../src/app/TwitchConstants.js","../src/app/TwitchApi.js","../src/app/AppUser.js","../src/app/TwitchIRCConnection.js","../src/app/SendIRCConnection.js","../src/app/ReceiveIRCConnection.js","../src/app/BadgeManager.js","../src/app/EmoteManager.js","../src/app/NameColorManager.js","../src/app/FavoritesList.js","../src/app/ChatMessage.js","../src/app/RoomstateMessage.js","../src/app/Chat.js","../src/app/ChatManager.js","../src/app/UserMessage.js","../src/app/MessageParser.js","../src/app/App.js","../src/main.js"],"sourcesContent":["'use strict';\n\n/**\n * Twitch constants like CLIENT_ID and API-URLs\n */\nclass TwitchConstants {\n    /**\n     * @return {string} Client Id for authorization on the Twitch apis\n     * @constructor\n     */\n    static get CLIENT_ID() {\n        return 'xllef7inid2mbeqoaj2o6bsohg7pz7';\n    }\n\n    /**\n     * @return {string} Scope needed for the app (for requesting an access token)\n     * @constructor\n     */\n    static get PERMISSION_SCOPE() {\n        return 'chat_login+user_blocks_edit+user_blocks_read+user_subscriptions';\n    }\n\n    /**\n     * @return {string} URL of the app\n     * @constructor\n     */\n    static get SELF_URL() {\n        return 'http://localhost:5000/';\n    }\n\n    /**\n     * @return {string} URL for getting an access token\n     * @constructor\n     */\n    static get AUTHORIZE_URL() {\n        return `https://api.twitch.tv/kraken/oauth2/authorize?response_type=token&client_id=\n        ${TwitchConstants.CLIENT_ID}&redirect_uri=${TwitchConstants.SELF_URL}&scope=\n        ${TwitchConstants.PERMISSION_SCOPE}`;\n    }\n\n    /**\n     * @return {string} URL of the badges api for getting global badges\n     * @constructor\n     */\n    static get GLOBAL_BADGES_API_URL() {\n        return 'https://badges.twitch.tv/v1/badges/global/display';\n    }\n\n    /**\n     * @return {string} The URL for connecting to the IRC Chat\n     * @constructor\n     */\n    static get WEBSOCKET_URL() {\n        return 'wss://irc-ws.chat.twitch.tv:443';\n    }\n}\n\nexport default TwitchConstants;\n","'use strict';\n\nimport TwitchConstants from './TwitchConstants.js';\n\n/**\n * Twitch Api calls\n */\nclass TwitchApi {\n    /**\n     * Gets the data to every user in the users parameter\n     * Calls the callback function with the JSON Data when request finished\n     * @param {string} users comma seperated list with usernames\n     * @param {object} context sets the Object 'this' is referring to in the callback function\n     * @param {function} callback function(data) that gets called after the request finished\n     */\n    static getUsers(users, context, callback) {\n        $.ajax({\n            context: context,\n            url: ('https://api.twitch.tv/helix/users'),\n            dataType: 'json',\n            headers: {\n                'Client-ID': TwitchConstants.CLIENT_ID,\n            },\n            data: {login: users},\n            async: true,\n        }).done(callback);\n    }\n\n    /**\n     * Gets the data to the user the OAuth token is from\n     * @param {object} context sets the Object 'this' is referring to in the callback function\n     * @param {function} callback function(data) that gets called after the request finished\n     */\n    static getUserFromOAuth(context, callback) {\n        $.ajax({\n            context: context,\n            url: ('https://api.twitch.tv/kraken'),\n            headers: {\n                'Accept': 'application/vnd.twitchtv.v5+json',\n                'Client-ID': TwitchConstants.CLIENT_ID,\n                'Authorization': ('OAuth ' + localStorage.accessToken),\n            },\n            async: false,\n        }).done(callback);\n    }\n\n    /**\n     * Gets the names of all chatters in the specified chat\n     * @param {string} chatName name of the chat\n     * @param {object} context sets the Object 'this' is referring to in the callback function\n     * @param {function} callback function(data) that gets called after the request finished\n     */\n    static getChatterList(chatName, context, callback) {\n        $.ajax({\n            context: context,\n            url: ('https://tmi.twitch.tv/group/user/' + chatName\n                + '/chatters'),\n            headers: {'Accept': 'application/vnd.twitchtv.v5+json'},\n            dataType: 'jsonp',\n            async: true,\n        }).done(callback);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Gets recent messages from the specified chat\n     * @param {string} chatId\n     */\n    static getRecentMessages(chatId) {\n        // Download recent messages\n        $.ajax({\n            url: ('https://tmi.twitch.tv/api/rooms/' + chatId\n                + '/recent_messages?count=50'),\n            headers: {'Accept': 'application/vnd.twitchtv.v5+json'},\n            dataType: 'jsonp',\n            async: true,\n        }).done(function(data) {\n            console.log(data);\n            let recentMessages = data.messages;\n            for (let j = 0; j < recentMessages.length; j++) {\n                //\n            }\n        });\n    }\n}\n\nexport default TwitchApi;\n","/**\n * @param data.token.user_name\n * @param data.token.user_id\n */\n'use strict';\nimport TwitchConstants from './TwitchConstants.js';\nimport TwitchApi from './TwitchApi.js';\n/**\n * Represents the User of the chat client\n */\nclass AppUser {\n    /**\n     * @constructor\n     */\n    constructor() {\n        /** @private */\n        this.userName_ = '';\n        // noinspection JSUnusedGlobalSymbols\n        /** @private */\n        this.userNameLC_ = '';\n        // noinspection JSUnusedGlobalSymbols\n        /** @private */\n        this.userId_ = '';\n\n        this.requestAppUserData();\n    }\n\n    /**\n     * Getter\n     * @return {string} this.userName_\n     */\n    getUserName() {\n        return this.userName_;\n    }\n    /**\n     * Getter\n     * @return {string} this.userId_\n     */\n    getUserId() {\n        return this.userId_;\n    }\n\n    /**\n     * Sends an ajax request to twitch to receive userName_ and userId_ of the AppUser\n     */\n    requestAppUserData() {\n        TwitchApi.getUserFromOAuth(this, function(data) {\n            if (data.token.valid === false) {\n                window.location.replace(TwitchConstants.AUTHORIZE_URL);\n            } else if (typeof(data.token) !== 'undefined') {\n                this.userName_ = data.token.user_name;\n                // noinspection JSUnusedGlobalSymbols\n                this.userNameLC_ = this.userName_.toLowerCase();\n                // noinspection JSUnusedGlobalSymbols\n                this.userId_ = data.token.user_id;\n            } else {\n                alert('Error while getting username');\n            }\n        });\n    }\n}\nexport default AppUser;\n","'use strict';\nimport TwitchConstants from './TwitchConstants.js';\n\n/**\n * Websocket connection to Twitch\n * @abstract\n */\nclass TwitchIRCConnection {\n    /**\n     * @param {AppUser} appUser\n     * @constructor\n     */\n    constructor(appUser) {\n        /** @private */\n        this.appUser_ = appUser;\n\n        if (new.target === TwitchIRCConnection) {\n            throw new TypeError('Cannot construct abstract instances ' +\n                'of TwitchIRCConnection directly');\n        }\n\n        this.connection_ = new WebSocket(TwitchConstants.WEBSOCKET_URL);\n        this.connection_.onopen = this.onOpen_.bind(this);\n        this.connection_.onerror = TwitchIRCConnection.onError_.bind(this);\n    }\n\n    /**\n     * Gets called when the connection established\n     * @private\n     */\n    onOpen_() {\n        this.connection_.send('CAP REQ :twitch.tv/membership');\n        this.connection_.send('CAP REQ :twitch.tv/tags');\n        this.connection_.send('CAP REQ :twitch.tv/commands');\n        this.connection_.send('PASS oauth:' + localStorage.accessToken);\n        this.connection_.send('NICK ' + this.appUser_.getUserName());\n    }\n\n    /**\n     * Gets called on error\n     * @private\n     */\n    static onError_() {\n        console.log('WebSocket Error ' + error);\n        alert('ERROR: ' + error);\n    }\n\n    // noinspection JSUnusedGlobalSymbols\n    /**\n     * Gets called on message\n     * @param {object} event event triggered by the Websocket connection\n     * @private\n     * @abstract\n     */\n    onMessage_(event) {};\n\n    /**\n     * Leave the specified chat\n     * @param {string} chatName\n     */\n    leaveChat(chatName) {\n        this.connection_.send('PART #' + chatName);\n    }\n\n    /**\n     * Join the specified chat\n     * @param {string} chatName\n     */\n    joinChat(chatName) {\n        this.connection_.send('JOIN #' + chatName);\n    }\n\n    /**\n     * Sends the specified message to the Websocket connection\n     * @param {string} message\n     */\n    send(message) {\n        this.connection_.send(message);\n    }\n}\n\nexport default TwitchIRCConnection;\n","'use strict';\nimport TwitchIRCConnection from './TwitchIRCConnection.js';\n/**\n * Websocket connection to Twitch for sending\n */\nclass SendIRCConnection extends TwitchIRCConnection {\n    /**\n     * @param {AppUser} appUser\n     * @constructor\n     */\n    constructor(appUser) {\n        super(appUser);\n        this.connection_.onmessage = this.onMessage_.bind(this);\n    }\n\n    /**\n     * @param {object} event event triggered by the Websocket connection\n     * @private\n     */\n    onMessage_(event) {\n        let messages = event.data.split('\\n');\n\n        for (let i = 0; i < messages.length; i++) {\n            let msg = messages[i];\n\n            if (msg.length <= 1) {\n                continue;\n            }\n\n            if (msg.startsWith('PING :tmi.twitch.tv')) {\n                this.connection_.send('PONG :tmi.twitch.tv');\n            }\n        }\n    }\n}\nexport default SendIRCConnection;\n\n","'use strict';\nimport TwitchIRCConnection from './TwitchIRCConnection.js';\n\n/**\n * Websocket connection to Twitch for receiving\n */\nclass ReceiveIRCConnection extends TwitchIRCConnection {\n    /**\n     * @param {AppUser} appUser\n     * @param {MessageParser} messageParser\n     * @param {ChatManager} chatManager\n     * @constructor\n     */\n    constructor(appUser, messageParser, chatManager) {\n        super(appUser);\n        this.messageParser_ = messageParser;\n        this.chatManager_ = chatManager;\n        this.connection_.onmessage = this.onMessage_.bind(this);\n    }\n\n    /**\n     * @param {object} event event triggered by the Websocket connection\n     * @private\n     */\n    onMessage_(event) {\n        let messages = event.data.split('\\n');\n\n        for (let i = 0; i < messages.length; i++) {\n            let msg = messages[i];\n            if (msg.startsWith('PING :tmi.twitch.tv')) {\n                this.connection_.send('PONG :tmi.twitch.tv');\n            } else if (msg.length > 1) {\n                let chatMessages = this.messageParser_.parseMessage(msg);\n                this.chatManager_.addMessages(chatMessages);\n            } else {\n                // console.log('Received empty message in ReceiveIRVConnection onMessage_()');\n            }\n        }\n    }\n}\n\nexport default ReceiveIRCConnection;\n","'use strict';\n\nimport TwitchConstants from './TwitchConstants.js';\n\n/**\n * Manages the badges which appear in front of the chat username\n */\nclass BadgeManager {\n    /**\n     * @constructor\n     */\n    constructor() {\n        this.badgesChannels_ = {};\n        // noinspection JSUnusedGlobalSymbols\n        this.badgesGlobal_ = null;\n\n        this.downloadGlobalBadges_();\n    }\n\n    /**\n     * @return {Object}\n     */\n    getBadgesChannels() {\n        return this.badgesChannels_;\n    }\n\n    /**\n     * @return {Object}\n     */\n    getBadgesGlobal() {\n        return this.badgesGlobal_;\n    }\n\n    /**\n     * Downloads the JSON information for global badges\n     * @private\n     */\n    downloadGlobalBadges_() {\n        // Download Global Badges JSON\n        $.ajax({\n            context: this,\n            url: (TwitchConstants.GLOBAL_BADGES_API_URL),\n            headers: {\n                'Accept': 'application/vnd.twitchtv.v5+json',\n                'Client-ID': TwitchConstants.CLIENT_ID,\n            },\n            async: true,\n        }).done(function(data) {\n            // noinspection JSUnusedGlobalSymbols\n            this.badgesGlobal_ = data.badge_sets;\n        });\n    }\n\n    /**\n     * @param {string} channelLC\n     * @param {string} channelId\n     */\n    downloadChannelBadges(channelLC, channelId) {\n        // Download Channel Badges\n        $.ajax({\n            context: this,\n            url: ('https://badges.twitch.tv/v1/badges/channels/'\n                + channelId + '/display'),\n            headers: {\n                'Accept': 'application/vnd.twitchtv.v5+json',\n                'Client-ID': TwitchConstants.CLIENT_ID,\n            },\n            async: true,\n        }).done(function(data) {\n            this.badgesChannels_[channelLC] = data.badge_sets;\n        });\n    }\n}\nexport default BadgeManager;\n","'use strict';\n\nimport TwitchConstants from './TwitchConstants.js';\n\n/**\n * Manages the Emotes for the chat messages and the emote menu\n */\nclass EmoteManager {\n    /**\n     * @param {AppUser} appUser\n     * @constructor\n     */\n    constructor(appUser) {\n        this.appUser_ = appUser;\n\n        this.userEmotes_ = {};\n\n        this.bttvChannels_ = {};\n        this.bttvGlobal_ = {};\n\n        this.ffzChannels_ = {};\n        this.ffzGlobal_ = {};\n\n        this.downloadGlobalEmotes_();\n    }\n\n    /**\n     * @return {Object}\n     */\n    getUserEmotes() {\n        return this.userEmotes_;\n    }\n    /**\n     * @return {Object}\n     */\n    getBttvGlobal() {\n        return this.bttvGlobal_;\n    }\n    /**\n     * @return {Object}\n     */\n    getFfzGlobal() {\n        return this.ffzGlobal_;\n    }\n    /**\n     * @return {Object}\n     */\n    getBttvChannels() {\n        return this.bttvChannels_;\n    }\n    /**\n     * @return {Object}\n     */\n    getFfzChannels() {\n        return this.ffzChannels_;\n    }\n\n    /**\n     * Downloads the global Twitch, BTTV and FFZ Emote JSONs\n     * @private\n     */\n    downloadGlobalEmotes_() {\n        // Gets a list of the emojis and emoticons that the specified\n        // user can use in chat.\n        $.ajax({\n            context: this,\n            url: ('https://api.twitch.tv/kraken/users/' + this.appUser_.getUserId() + '/emotes'),\n            headers: {\n                'Accept': 'application/vnd.twitchtv.v5+json',\n                'Client-ID': TwitchConstants.CLIENT_ID,\n                'Authorization': ('OAuth ' + localStorage.accessToken),\n            },\n            async: true,\n        }).done(function(data) {\n            this.userEmotes_ = data.emoticon_sets;\n            // console.log(data.emoticon_sets);\n        });\n\n        // Download Global BTTV Emotes JSON\n        $.ajax({\n            context: this,\n            url: ('https://api.betterttv.net/2/emotes'),\n            async: true,\n        }).done(function(data) {\n            this.bttvGlobal_ = data.emotes;\n        });\n\n        // Download Global FFZ Emotes JSON\n        $.ajax({\n            context: this,\n            url: ('https://api.frankerfacez.com/v1/set/global'),\n            async: true,\n        }).done(function(data) {\n            // console.log(data);\n            this.ffzGlobal_ = data;\n        });\n    }\n\n    /**\n     *\n     * @param {string} channelLC\n     */\n    downloadChannelEmotes(channelLC) {\n        this.downloadFfzChannelEmotes_(channelLC);\n        this.downloadBttvChannelEmotes_(channelLC);\n    }\n\n    /**\n     *\n     * @param {string} channelLC\n     * @private\n     */\n    downloadBttvChannelEmotes_(channelLC) {\n        // Download BTTV Channel Emotes\n        $.ajax({\n            context: this,\n            url: ('https://api.betterttv.net/2/channels/' + channelLC),\n            async: true,\n            dataType: 'json',\n            error: function(xhr) {\n                if (xhr.status === 404) {\n                    // Ignore - No BTTV emotes in this channel\n                    console.log('No BTTV Emotes in Channel: ' + channelLC);\n                }\n            },\n        }).done(function(data) {\n            this.bttvChannels_[channelLC] = data.emotes;\n        });\n    }\n\n    /**\n     *\n     * @param {string} channelLC\n     * @private\n     */\n    downloadFfzChannelEmotes_(channelLC) {\n        // Download FFZ Channel Emotes/Moderator Channel Badge\n        $.ajax({\n            context: this,\n            url: ('https://api.frankerfacez.com/v1/room/' + channelLC),\n            async: true,\n            dataType: 'json',\n            error: function(xhr) {\n                if (xhr.status === 404) {\n                    // Ignore - No FFZ emotes in this channel\n                    console.log('No FFZ Emotes in Channel: ' + channelLC);\n                }\n            },\n        }).done(function(data) {\n            this.ffzChannels_[channelLC] = data;\n        });\n    }\n}\nexport default EmoteManager;\n","'use strict';\n\n/**\n * Manages the name color for chatters who never set their name color\n */\nclass NameColorManager {\n    /**\n     * @constructor\n     */\n    constructor() {\n        this.userColors_ = {};\n    }\n\n    /**\n     * @return {Object.<string, string>}\n     */\n    getUserColors() {\n        return this.userColors_;\n    }\n\n    /**\n     * @param {string} username\n     * @param {string} color hex #xxxxxx\n     */\n    addUserColor(username, color) {\n        this.userColors_[username] = color;\n    }\n\n    /**\n     * Returns a random color of the Twitch standard name colors\n     * @return {string} Random color as hex #xxxxxx\n     */\n    static randomColor() {\n        let colorChoices = [\n            '#ff0000', '#ff4500',\n            '#ff69b4', '#0000ff',\n            '#2e8b57', '#8a2be2',\n            '#008000', '#daa520',\n            '#00ff7f', '#b22222',\n            '#d2691e', '#ff7f50',\n            '#5f9ea0', '#9acd32',\n            '#1e90ff',\n        ];\n        let randomNumber = Math.floor(Math.random() * colorChoices.length);\n        return colorChoices[randomNumber];\n    }\n\n    /**\n     * Does correct the name color for dark backgrounds, so they are better readable\n     * @param {string} hexColor to be corrected as #xxxxxx hex value\n     * @return {string} corrected color as #xxxxxx hex value\n     */\n    static colorCorrection(hexColor) {\n        // Color contrast correction\n        let rgbColor = NameColorManager.hex2rgb_(hexColor);\n        let yiqColor = NameColorManager.rgb2yiq_(rgbColor.r, rgbColor.g, rgbColor.b);\n        while (hexColor[0] < 0.5) {\n            rgbColor = NameColorManager.yiq2rgb_(yiqColor.y, yiqColor.i, yiqColor.q);\n            let hslColor = NameColorManager.rgb2hsl_(rgbColor.r, rgbColor.g, rgbColor.b);\n            hslColor.l = Math.min(Math.max(0, 0.1 + 0.9 * hslColor.l), 1);\n            rgbColor = NameColorManager.hsl2rgb_(hslColor.h, hslColor.s, hslColor.l);\n            yiqColor = NameColorManager.rgb2yiq_(rgbColor.r, rgbColor.g, rgbColor.b);\n        }\n        rgbColor = NameColorManager.yiq2rgb_(yiqColor.y, yiqColor.i, yiqColor.q);\n        hexColor = NameColorManager.rgb2hex_(rgbColor.r, rgbColor.g, rgbColor.b);\n        return hexColor.substring(0, 7);\n    }\n\n    /**\n     * Converts (r,g,b) to #xxxxxx hex color\n     * @param {number} r red 0-255\n     * @param {number} g green 0-255\n     * @param {number} b blue 0-255\n     * @return {string} color as #xxxxxx hex value\n     * @private\n     */\n    static rgb2hex_(r, g, b) {\n        return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n    }\n\n    /**\n     * Converts a #xxxxxx hex color to a rgb color\n     * @param {string} hex color as #xxxxxx hex value\n     * @return {{r: number, g: number, b: number}} r, g, b: 0-255\n     * @private\n     */\n    static hex2rgb_(hex) {\n        let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return result ? {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16),\n        } : null;\n    }\n\n    /**\n     * Converts a rgb color to a yiq color\n     * @param {number} r red 0-255\n     * @param {number} g green 0-255\n     * @param {number} b blue 0-255\n     * @return {{y: number, i: number, q: number}} y, i and q between 0.0 and 1.0\n     * @private\n     */\n    static rgb2yiq_(r, g, b) {\n        // matrix transform\n        let y = ((0.299 * r) + (0.587 * g) + (0.114 * b)) / 255;\n        let i = ((0.596 * r) + (-0.275 * g) + (-0.321 * b)) / 255;\n        let q = ((0.212 * r) + (-0.523 * g) + (0.311 * b)) / 255;\n        return {\n            y: y,\n            i: i,\n            q: q,\n        };\n    }\n\n    /**\n     * Converts a yiq color to a rgb color\n     * @param {number} y luma 0.0-1.0\n     * @param {number} i first chrominance 0.0-1.0\n     * @param {number} q second chrominance 0.0-1.0\n     * @return {{r: number, g: number, b: number}} r, g, b: 0-255\n     * @private\n     */\n    static yiq2rgb_(y, i, q) {\n        // matrix transform\n        let r = (y + (0.956 * i) + (0.621 * q)) * 255;\n        let g = (y + (-0.272 * i) + (-0.647 * q)) * 255;\n        let b = (y + (-1.105 * i) + (1.702 * q)) * 255;\n        // bounds-checking\n        if (r < 0) {\n            r = 0;\n        } else if (r > 255) {\n            r = 255;\n        }\n        if (g < 0) {\n            g = 0;\n        } else if (g > 255) {\n            g = 255;\n        }\n        if (b < 0) {\n            b = 0;\n        } else if (b > 255) {\n            b = 255;\n        }\n        return {\n            r: r,\n            g: g,\n            b: b,\n        };\n    }\n\n    /**\n     * Converts a rgb color to a hsl color\n     * @param {number} r red 0-255\n     * @param {number} g green 0-255\n     * @param {number} b blue 0-255\n     * @return {{h: number, s: number, l: number}} h: 0-360, s: 0.0-1.0, l: 0.0-1.0\n     * @private\n     */\n    static rgb2hsl_(r, g, b) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n\n        let max = Math.max(r, g, b);\n        let min = Math.min(r, g, b);\n        let h = (max + min) / 2;\n        let s = (max + min) / 2;\n        let l = (max + min) / 2;\n\n        if (max === min) {\n            h = s = 0; // achromatic\n        } else {\n            let d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n            }\n\n            h /= 6;\n        }\n\n        return {\n            h: h*360,\n            s: s,\n            l: l,\n        };\n    }\n\n    /**\n     * Converts an hsl color to a rgb color\n     * @param {number} h hue 0-360\n     * @param {number} s saturation 0.0-1.0\n     * @param {number} l lightness 0.0-1.0\n     * @return {{r: number, g: number, b: number}} r, g, b: 0-255\n     * @private\n     */\n    static hsl2rgb_(h, s, l) {\n        // based on algorithm from http://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\n        if ( h === undefined ) {\n            return {\n                r: 0,\n                g: 0,\n                b: 0,\n            };\n        }\n\n        let chroma = (1 - Math.abs((2 * l) - 1)) * s;\n        let huePrime = h / 60;\n        let secondComponent = chroma * (1 - Math.abs((huePrime % 2) - 1));\n\n        huePrime = Math.floor(huePrime);\n        let red;\n        let green;\n        let blue;\n\n        if ( huePrime === 0 ) {\n            red = chroma;\n            green = secondComponent;\n            blue = 0;\n        } else if ( huePrime === 1 ) {\n            red = secondComponent;\n            green = chroma;\n            blue = 0;\n        } else if ( huePrime === 2 ) {\n            red = 0;\n            green = chroma;\n            blue = secondComponent;\n        } else if ( huePrime === 3 ) {\n            red = 0;\n            green = secondComponent;\n            blue = chroma;\n        } else if ( huePrime === 4 ) {\n            red = secondComponent;\n            green = 0;\n            blue = chroma;\n        } else if ( huePrime === 5 ) {\n            red = chroma;\n            green = 0;\n            blue = secondComponent;\n        }\n\n        let lightnessAdjustment = l - (chroma / 2);\n        red += lightnessAdjustment;\n        green += lightnessAdjustment;\n        blue += lightnessAdjustment;\n\n        return {\n            r: Math.round(red * 255),\n            g: Math.round(green * 255),\n            b: Math.round(blue * 255),\n        };\n    }\n}\nexport default NameColorManager;\n","'use strict';\n\n/**\n * @param data._total\n * @param data.users._id\n * @param data.profile_image_url\n */\n\nimport TwitchApi from './TwitchApi.js';\n\n/**\n * List of favorite Twitch channels\n */\nclass FavoritesList {\n    /**\n     * @param {BadgeManager} badgeManager\n     * @param {EmoteManager} emoteManager\n     * @param {ChatManager} chatManager\n     * @constructor\n     */\n    constructor(badgeManager, emoteManager, chatManager) {\n        this.isVisible_ = true;\n        this.badgeManager_ = badgeManager;\n        this.emoteManager_ = emoteManager;\n        this.chatManager_ = chatManager;\n\n        $('#addFavFromInput').click(this.addFavToList.bind(this));\n        $('#newFavInput').keydown(function(event) {\n            if (event.keyCode === 13) {\n                $('#addFavFromInput').click();\n            }\n        });\n        document.getElementById('channelListToggle').addEventListener('click', this.toggleFavList);\n        this.loadFavoritesFromLocalStorage_();\n    }\n\n    /**\n     * @private\n     */\n    loadFavoritesFromLocalStorage_() {\n        try {\n            let channelsArray = JSON.parse(localStorage.getItem('channels'));\n            if (channelsArray !== null) {\n                while (channelsArray.length) {\n                    let channels = channelsArray.splice(0, 98);\n                    this.addFavToList(channels);\n                }\n            } else {\n                let channels = [];\n                localStorage.setItem('channels', JSON.stringify(channels));\n            }\n        } catch (err) {\n            alert('Error: ' + err);\n            let channels = [];\n            localStorage.setItem('channels', JSON.stringify(channels));\n        }\n    }\n\n    /**\n     * If the favorites list is enabled, disable it.\n     * If its disabled, enable it.\n     */\n    toggleFavList() {\n        this.isVisible_ = !this.isVisible_;\n        if (!this.isVisible_) {\n            document.getElementById('fav-channel-list').style.display\n                = 'inline-block';\n            $('.container').css({'width': 'calc(100% - 250px)'});\n            document.getElementById('channelListToggle').style.backgroundImage\n                = 'url(./img/arrow_down.svg)';\n        } else {\n            document.getElementById('fav-channel-list').style.display = 'none';\n            $('.container').css({'width': '100%'});\n            document.getElementById('channelListToggle').style.backgroundImage\n                = 'url(./img/arrow_up.svg)';\n        }\n    }\n\n    /**\n     * Add a channel to the list of favorites\n     *\n     * @param {Array.<string>} channelArray channel name or null\n     */\n    addFavToList(channelArray) {\n        let channels = document.getElementById('newFavInput').value.split(',');\n        if ($.isArray(channelArray)) {\n            channels = channelArray;\n        }\n        let channelsCount = channels.length;\n\n        TwitchApi.getUsers(channels, this, function(data) {\n            data = data.data;\n            let notExistingChannelsCount = channelsCount - data._total;\n            for (let i = 0; i < data.length; i++) {\n                let channel = data[i].display_name;\n                let channelId = data[i].id;\n                let profilePicURL = data[i].profile_image_url;\n                // ToDo: Check if next line is necessary\n                document.getElementById('newFavInput').placeholder = '';\n                // noinspection JSPotentiallyInvalidUsageOfClassThis\n                this.addFavLine_(channel, profilePicURL, channelId);\n            }\n\n            if (notExistingChannelsCount > 0) {\n                // noinspection JSPotentiallyInvalidUsageOfClassThis\n                this.showChannelDoesNotExistInfo_(notExistingChannelsCount);\n            }\n        });\n    }\n\n    /**\n     * @param {number} notExistingChannelsCount\n     * @private\n     */\n    showChannelDoesNotExistInfo_(notExistingChannelsCount) {\n        document.getElementById('newFavInput').value = '';\n        $('#newFavInput').queue(function(next) {\n            let info = (notExistingChannelsCount > 1) ? ' Channels do not exist.' :\n                ' Channel does not exist.';\n            $(this).attr('placeholder', notExistingChannelsCount + info);\n            next();\n        }).delay(5000).queue(function(next) {\n            $(this).attr('placeholder', '');\n            next();\n        });\n    }\n\n    /**\n     * @param {string} channel channel name\n     * @param {string} profilePicURL URL to profile image file\n     * @param {string} channelId channel id\n     */\n    addFavLine_(channel, profilePicURL, channelId) {\n        let channelLC = channel.toLowerCase();\n\n        this.badgeManager_.downloadChannelBadges(channelLC, channelId);\n        this.emoteManager_.downloadChannelEmotes(channelLC);\n\n\n        if (channel.length > 0\n            && $('.favEntry[id$=\\'' + channelLC + '\\']').length === 0) {\n            document.getElementById('newFavInput').value = '';\n\n            let favList = $('#fav-channel-list');\n\n            favList.append('<div class=\"favEntry\" id=\"' + channelLC\n                + '\"><img class=\"profilePic\" src=\"' + ((profilePicURL != null)\n                    ? profilePicURL : '/img/defaultProfile.png')\n                + '\" /><input class=\"favEntryAddChatButton\" ' +\n                'id=\"' + channelLC + '\" type=\"button\" value=\"' + channel\n                + '\"><input class=\"favEntryRemoveButton\" ' +\n                'id=\"' + channelLC + '\" type=\"button\" ></div>');\n\n            $(document).on('click', '.favEntryAddChatButton[id$=\\''\n                + channelLC + '\\']', this, function(event) {\n                event.data.chatManager_.addChat(channel);\n            });\n\n            $(document).on('click', '.favEntryRemoveButton[id$=\\'' + channelLC + '\\']', this,\n                function(event) {\n                    $(this).parent().remove();\n                    event.data.removeChannelFromLocalStorage_(channelLC);\n            });\n\n            // ToDo: is it needed to do channelList.sortable() every time when an entry is added?\n            favList.sortable({\n                axis: 'y',\n                animation: 300,\n                cursor: 'move',\n                revert: 200,\n                scroll: true,\n                containment: 'parent',\n            });\n        }\n\n        this.storeChannelInLocalStorage_(channelLC);\n    }\n\n    // noinspection JSMethodCanBeStatic\n    /**\n     * @param {string} channelName Twitch channel id of the channel that is stored\n     * @private\n     */\n    storeChannelInLocalStorage_(channelName) {\n        let channels = JSON.parse(localStorage.getItem('channels'));\n        let index = channels.indexOf(channelName);\n        if (index > -1) {\n            channels.splice(index, 1);\n        }\n        channels.push(channelName);\n        localStorage.setItem('channels', JSON.stringify(channels));\n    }\n\n    // noinspection JSMethodCanBeStatic\n    /**\n     * @param {string} channelLC Twitch channel id of the channel that gets deleted\n     * @private\n     */\n    removeChannelFromLocalStorage_(channelLC) {\n        let channels = JSON.parse(localStorage.getItem('channels'));\n        let index = channels.indexOf(channelLC);\n        if (index > -1) {\n            channels.splice(index, 1);\n        }\n        localStorage.setItem('channels', JSON.stringify(channels));\n    }\n}\n\nexport default FavoritesList;\n","'use strict';\n\n/**\n * Represents one chat message\n */\nclass ChatMessage {\n    /**\n     * @param {string} chatName Name of the chat the message is for\n     * @param {string} content The actual content of the message\n     * @constructor\n     */\n    constructor(chatName, content) {\n        this.chatName_ = chatName;\n        /** @private */\n        this.timestamp_ = this.getCurrentTimeFormatted_();\n        /** @private */\n        this.content_ = content.trim();\n        /** @private */\n    }\n\n    /**\n     * @return {string}\n     */\n    getContent() {\n        return this.content_;\n    }\n    /**\n     * @return {string}\n     */\n    getTimestamp() {\n        return this.timestamp_;\n    }\n    /**\n     * @return {string}\n     */\n    getChatName() {\n        return this.chatName_;\n    }\n\n    // noinspection JSMethodCanBeStatic\n    /**\n     * Returns the current time in 24h format\n     * @return {string} time in format HH:MM\n     * @private\n     */\n    getCurrentTimeFormatted_() {\n        let currentDate = new Date();\n        let time;\n        if (currentDate.getHours() >= 10 && currentDate.getMinutes() >= 10) {\n            time = currentDate.getHours() + ':' + currentDate.getMinutes();\n        } else if (currentDate.getHours() < 10 && currentDate.getMinutes() >= 10) {\n            time = '0' + currentDate.getHours() + ':' + currentDate.getMinutes();\n        } else if (currentDate.getHours() >= 10 && currentDate.getMinutes() < 10) {\n            time = currentDate.getHours() + ':0' + currentDate.getMinutes();\n        } else {\n            time = '0' + currentDate.getHours() + ':0' + currentDate.getMinutes();\n        }\n        return time;\n    }\n    /**\n     * @return {string} HTML Code\n     */\n    getHtml() {\n        return '<li style=\"border-top: 1px solid #673ab7;' +\n            'border-bottom: 1px solid #673ab7;padding-top: 3px; ' +\n            'padding-bottom: 3px;\"><span style=\"color: gray;' +\n            'font-size: 11px;\">' + this.timestamp_ + '</span>  ' +\n            this.content_\n            + '</li>';\n    }\n}\n\nexport default ChatMessage;\n","'use strict';\nimport ChatMessage from './ChatMessage.js';\n\n/**\n * Represents one roomstate message\n */\nclass RoomstateMessage extends ChatMessage {\n    /**\n     * @param {string} chatName Name of the chat the message is for\n     * @param {string} content The actual content of the message\n     * @constructor\n     */\n    constructor(chatName, content) {\n        super(chatName, content);\n    }\n\n    /**\n     * @return {string} HTML Code\n     */\n    getHtml() {\n        return '<p style=\"color: gray; font-size: 11px;' +\n            'padding-left: 10px;font-weight: 200;\">' + this.getContent() + '</p>';\n    }\n}\nexport default RoomstateMessage;\n","import TwitchApi from './TwitchApi.js';\nimport RoomstateMessage from './RoomstateMessage.js';\n\n/**\n * Represents one chat column on the app\n */\nclass Chat {\n    /**\n     * Adds the chat column for channelName to the app\n     *\n     * @param {string} channelName Name of the channel\n     * @param {EmoteManager} emoteManager\n     * @param {ReceiveIRCConnection} receiveIrcConnection\n     * @param {SendIRCConnection} sendIrcConnection\n     */\n    constructor(channelName, emoteManager, receiveIrcConnection, sendIrcConnection) {\n        /** @private */\n        this.channelName_ = channelName;\n        /** @private */\n        this.channelNameLC_ = channelName.toLowerCase();\n        /** @private */\n        this.emoteManager_ = emoteManager;\n        /** @private */\n        this.receiveIrcConnection_ = receiveIrcConnection;\n        /** @private */\n        this.sendIrcConnection_ = sendIrcConnection;\n        /** @private */\n        this.messageCount_ = 0;\n        /** @private */\n        this.containerCount_ = 0;\n        /** @private\n         *  @const */\n        this.MESSAGE_LIMIT_ = 200000;\n        /** @private\n         *  @const */\n        this.MESSAGES_IN_CONTAINER_ = 100;\n    }\n\n    /**\n     * @param {Object.<ChatMessage>} chatMessage\n     */\n    addMessage(chatMessage) {\n        if (chatMessage instanceof RoomstateMessage) {\n            let chatInput = $('.chatInput#' + chatMessage.getChatName().toLowerCase());\n            chatInput.append(chatMessage.getHtml());\n        } else {\n            let chatMessageList = $('#' + this.channelName_.toLowerCase() + 'contentArea');\n\n            if (chatMessageList.children('div').length === 0 ||\n                (chatMessageList.children('div').length !== 0 &&\n                    chatMessageList.children('div:last')\n                        .children('li').length >= this.MESSAGES_IN_CONTAINER_)) {\n                chatMessageList.append('<div></div>');\n                this.containerCount_++;\n            }\n            chatMessageList.children('div:last').append(chatMessage.getHtml());\n            this.messageCount_++;\n            this.limitMessages_();\n            this.hideNotVisibleMessages();\n            this.correctScrollPosition_();\n        }\n    }\n\n    /**\n     * Checks whether there are more than this.MESSAGE_LIMIT_ messages in chat.\n     * If yes than remove the first div with messages\n     * @private\n     */\n    limitMessages_() {\n        if (this.messageCount_ >= this.MESSAGE_LIMIT_) {\n            $('#' + this.channelName_ + ' .chatContent .chatMessageList div:first').remove();\n            // noinspection JSUnusedGlobalSymbols\n            this.messageCount_ -= this.MESSAGES_IN_CONTAINER_;\n            this.containerCount_--;\n        }\n    }\n\n    /**\n     * When chat is scrolled to bottom, this hides all message containers except the last 3\n     */\n    hideNotVisibleMessages() {\n        // Hide all divs with 100 messages each which are not the last 3 to improve performance\n        if (this.containerCount_ > 3 && this.isScrolledToBottom()) {\n            let chatMessageList = $('#' + this.channelName_ + 'contentArea');\n            chatMessageList.children('div:visible').slice(0, -3).hide();\n        }\n    }\n\n    /**\n     * Checks if the Chat is scrolled to the bottom\n     * @return {boolean} True if on bottom, false if not\n     */\n    isScrolledToBottom() {\n        let bottom = false;\n        let chatContent = $('#' + this.channelNameLC_ + 'scrollArea');\n        if (chatContent[0].scrollHeight - chatContent.scrollTop()\n            < chatContent.outerHeight() + 50) bottom = true;\n        return bottom;\n    }\n\n    /**\n     * @private\n     */\n    correctScrollPosition_() {\n        // Scroll to bottom\n        let bottom = this.isScrolledToBottom();\n        let chatContent = $('#' + this.channelNameLC_ + 'scrollArea');\n        if (bottom) {\n            let contentHeight = chatContent[0].scrollHeight;\n            chatContent.scrollTop(contentHeight + 50);\n            // chatContent.stop(true, false).delay(50)\n            // .animate({ scrollTop: contentHeight }, 2000, 'linear');\n            $('#' + this.channelNameLC_ + ' .chatContent .chatMessageList')\n                .find('p:last').imagesLoaded(function() {\n                setTimeout(function() {\n                    contentHeight = chatContent[0].scrollHeight;\n                    chatContent.scrollTop(contentHeight + 50);\n                    // chatContent.stop(true, false).delay(50)\n                    // .animate({ scrollTop: contentHeight }, 2000, 'linear');\n                    // alert(\"wub\");\n                }, 50);\n            });\n        } else if (!bottom\n            && $('#' + this.channelNameLC_ + ' .chatNewMessagesInfo').is(':hidden')) {\n            let contentHeight = chatContent[0].scrollHeight;\n            chatContent.scrollTop(contentHeight + 50);\n            // chatContent.stop(true, false).delay(50)\n            // .animate({ scrollTop: contentHeight }, 2000, 'linear');\n        }\n    }\n\n    /**\n     * @return {string} HTML Code for the chat\n     */\n    getHtml() {\n        let channelLC = this.channelName_.toLowerCase();\n        return '<div class=\"chat\" id=\"' + channelLC + '\">' +\n            '<div class=\"chatHeader\" id=\"' + channelLC + '\">' +\n            '<button class=\"toggleViewerlist\" id=\"' + channelLC + '\"></button>' +\n            '<span>' + this.channelName_ + '</span>' +\n            '<button class=\"removeChat\" id=\"' + channelLC + '\"></button>' +\n            '<button class=\"toggleStream\" id=\"' + channelLC + '\"></button>' +\n            '</div>' +\n            '<div class=\"chatContent\" id=\"' + channelLC + 'scrollArea\">' +\n            '<div class=\"chatMessageList\" id=\"' + channelLC + 'contentArea\">' +\n            '</div></div>' +\n            '<div class=\"chatInput\" id=\"' + channelLC + '\">' +\n            '<div class=\"chatNewMessagesInfo\" id=\"' + channelLC + '\">' +\n            'More messages below.</div>' +\n            '<img class=\"kappa\" src=\"/img/Kappa.png\" />' +\n            '<textarea maxlength=\"500\" class=\"chatInputField\" id=\"'\n            + channelLC +\n            '\" placeholder=\"Send a message...\"></textarea>' +\n            '<div class=\"emoteMenu\">' +\n            '<div class=\"emotes\">' +\n            '<div class=\"bttvEmotes\" style=\"width: 100%;\">' +\n            '<h3>BTTV Emotes</h3></div>' +\n            '<div class=\"bttvChannelEmotes\" style=\"width: 100%;\">' +\n            '<h3>BTTV Channel Emotes</h3></div>' +\n            '<div class=\"ffzEmotes\" style=\"width: 100%;\">' +\n            '<h3>FFZ Emotes</h3></div>' +\n            '<div class=\"ffzChannelEmotes\" style=\"width: 100%;\">' +\n            '<h3>FFZ Channel Emotes</h3></div>' +\n            '</div></div></div>'\n            + '<div class=\"chatViewerlist\" id=\"' + channelLC + '\"></div>';\n    }\n\n    /**\n     * Adds all abilities to the Chat (Button actions etc.)\n     */\n    addAbilities() {\n        this.addEmotesToEmoteMenu_();\n        this.addEmoteMenuImgClickAbility_();\n        this.addEmoteMenuGroupClickAbility_();\n        this.addEmoteMenuToggleAbility_();\n        this.addEmoteMenuDraggableAbility_();\n        this.addEmoteMenuResizableAbility_();\n        this.addStreamIframeAbility_();\n        this.addResizeAbility_();\n        this.addChatterListAbility_();\n        this.addSendMessagesAbility_();\n        this.addNewMessageInfoAbility_();\n    }\n    /**\n     * @private\n     */\n    addEmotesToEmoteMenu_() {\n        let channelLC = this.channelName_.toLowerCase();\n        let userEmotes = this.emoteManager_.getUserEmotes();\n        // Twitch Global/Channel\n        for (let j in userEmotes) {\n            if ({}.hasOwnProperty.call(userEmotes, j)) {\n                let emoteSet = userEmotes[j];\n                $('.chatInput[id$=\\'' + channelLC + '\\'] .emoteMenu .emotes')\n                    .prepend('<div class=\"' + j + '\" style=\"width: 100%;\">' +\n                        '<h3>' + j + '</h3></div>');\n                for (let k in emoteSet) {\n                    if ({}.hasOwnProperty.call(emoteSet, k)) {\n                        $('.chatInput[id$=\\'' + channelLC\n                            + '\\'] .emoteMenu .emotes .' + j)\n                            .append('<img ' +\n                                'src=\\'https://static-cdn.jtvnw.net/emoticons/v1/'\n                                + emoteSet[k].id + '/1.0\\' alt=\\''\n                                + emoteSet[k].code + '\\' />');\n                    }\n                }\n            }\n        }\n        // BTTV Global\n        let bttvGlobal = this.emoteManager_.getBttvGlobal();\n        for (let i = 0; i < bttvGlobal.length; i++) {\n            if (bttvGlobal[i].channel == null) {\n                $('.chatInput[id$=\\'' + channelLC + '\\'] .emoteMenu .bttvEmotes')\n                    .append('<img src=\"https://cdn.betterttv.net/emote/'\n                        + bttvGlobal[i].id + '/1x\" alt=\"' + bttvGlobal[i].code\n                        + '\" />');\n            }\n        }\n        // FFZ Global\n        let ffzGlobal = this.emoteManager_.getFfzGlobal();\n        for (let j = 0; j < ffzGlobal.default_sets.length; j++) {\n            let emoteSetGlobal = ffzGlobal.default_sets[j];\n            let emotesInSetGlobal = ffzGlobal['sets'][emoteSetGlobal]['emoticons'];\n            for (let k = 0; k < emotesInSetGlobal.length; k++) {\n                // let ffzEmoteName = JSON.stringify(emotesInSetGlobal[k].name);\n\n                $('.chatInput[id$=\\'' + channelLC + '\\'] .emoteMenu .ffzEmotes')\n                    .append('<img src=\\'https:' +\n                        emotesInSetGlobal[k]['urls']['1'] + '\\' ' +\n                        'alt=\\'' + emotesInSetGlobal[k].name + '\\' />');\n            }\n        }\n        // BTTV Channel\n        let bttvChannels = this.emoteManager_.getBttvChannels();\n        if (bttvChannels.hasOwnProperty(channelLC)) {\n            for (let j = 0; j < bttvChannels[channelLC].length; j++) {\n                /* let bttvChannelEmote =\n                    JSON.stringify(bttvChannels[channelLC][j].code);*/\n\n                let emoteId = JSON.stringify(bttvChannels[channelLC][j].id)\n                    .substring(1,\n                        JSON.stringify(bttvChannels[channelLC][j].id).length - 1);\n                $('.chatInput[id$=\\'' + channelLC\n                    + '\\'] .emoteMenu .bttvChannelEmotes')\n                    .append('<img src=\\'https://cdn.betterttv.net/emote/' +\n                        emoteId +\n                        '/1x\\' alt=\\'' + bttvChannels[channelLC][j].code + '\\' />');\n            }\n        }\n        // FFZ Channel\n        let ffzChannels = this.emoteManager_.getFfzChannels();\n        if (ffzChannels.hasOwnProperty(channelLC)) {\n            let ffzChannelId = ffzChannels[channelLC]['room']['_id'];\n            if (ffzChannels[channelLC]['sets'][ffzChannelId] != null) {\n                let ffzChannelEmoteSet =\n                    ffzChannels[channelLC]['sets'][ffzChannelId]['emoticons'];\n                for (let j = 0; j < ffzChannelEmoteSet.length; j++) {\n                    /* let ffzChannelEmote =\n                        JSON.stringify(ffzChannelEmoteSet[j].name);*/\n\n                    $('.chatInput[id$=\\'' + channelLC\n                        + '\\'] .emoteMenu .ffzChannelEmotes')\n                        .append('<img src=\\'https:' +\n                            ffzChannelEmoteSet[j]['urls']['1'] + '\\' ' +\n                            'alt=\\'' + ffzChannelEmoteSet[j].name + '\\' />');\n                }\n            }\n        }\n    }\n    /**\n     * @private\n     */\n    addEmoteMenuImgClickAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        $('.chatInput[id$=\\'' + channelLC + '\\'] .emoteMenu img').click(function() {\n            let emoteName = $(this).attr('alt');\n            let inputField = $('.chatInputField[id$=\\'' + channelLC + '\\']');\n            let curValue = inputField.val();\n            let newValue;\n            if (!curValue.endsWith(' ') && curValue.length > 0) {\n                newValue = curValue + ' ' + emoteName + ' ';\n            } else {\n                newValue = curValue + emoteName + ' ';\n            }\n            inputField.val(newValue);\n        });\n    }\n\n    /**\n     * @private\n     */\n    addEmoteMenuGroupClickAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        $('.chatInput[id$=\\'' + channelLC + '\\'] .emoteMenu .emotes h3')\n            .click(/* @this HTMLElement */function() {\n                if ($(this).parent().css('height') === '18px') {\n                    $(this).parent().css({'height': ''});\n                } else {\n                    $(this).parent().css({'height': '18px'});\n                }\n            });\n    }\n\n    /**\n     * @private\n     */\n    addEmoteMenuToggleAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        let $emoteMenu = $('.chatInput[id$=\\'' + channelLC + '\\'] .emoteMenu');\n        $('.chatInput[id$=\\'' + channelLC + '\\'] .kappa').click(function() {\n            if ($emoteMenu.is(':hidden')) {\n                $('.chatInput[id$=\\'' + channelLC + '\\'] .emoteMenu').show();\n            } else {\n                $emoteMenu.hide();\n                $emoteMenu.css({\n                    'top': '',\n                    'left': '',\n                    'right': '',\n                    'bottom': '',\n                });\n            }\n        });\n    }\n\n    /**\n     * @private\n     */\n    addEmoteMenuDraggableAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        let $emoteMenu = $('.chatInput[id$=\\'' + channelLC + '\\'] .emoteMenu');\n        let chatArea = $('#main-chat-area');\n        $emoteMenu.draggable({\n            containment: chatArea,\n        });\n    }\n    /**\n     * @private\n     */\n    addEmoteMenuResizableAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        let $emoteMenu = $('.chatInput[id$=\\'' + channelLC + '\\'] .emoteMenu');\n        $emoteMenu.resizable({\n            handles: 'n, ne, e',\n            minHeight: 200,\n            minWidth: 200,\n        });\n    }\n    /**\n     * @private\n     */\n    addStreamIframeAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        $(document).on('click', '.toggleStream[id$=\\'' + channelLC + '\\']',\n            /* @this HTMLElement */function() {\n                if ($(this).parent().parent().find('.chatStream').length) {\n                    $(this).parent().parent().find('.chatStream').remove();\n                    $(this).parent().parent().find('.chatContent')\n                        .css({'height': 'calc(100% - 105px)'});\n                    $(this).parent().parent().find('.chatViewerlist')\n                        .css({'height': 'calc(100% - 35px)'});\n                } else {\n                    $(this).parent().parent().prepend(\n                        '<div class=\"chatStream\" id=\"' + channelLC + '\">' +\n                        '<div class=\"chatStreamInner\">' +\n                        '<iframe src=\"https://player.twitch.tv/?channel=' + channelLC\n                        + '\" frameborder=\"0\" allowfullscreen=\"true\"' +\n                        ' scrolling=\"no\" height=\"100%\" width=\"100%\"></iframe>' +\n                        '</div></div>');\n                    $(this).parent().parent().find('.chatContent')\n                        .css({\n                            'height': 'calc(100% - 105px - ' +\n                            $(this).parent().parent()\n                                .find('.chatStream').outerHeight() + 'px )',\n                        });\n                    $(this).parent().parent().find('.chatViewerlist')\n                        .css({\n                            'height': 'calc(100% - 35px - ' +\n                            $(this).parent().parent()\n                                .find('.chatStream').outerHeight() + 'px )',\n                        });\n                }\n            });\n    }\n    /**\n     * @private\n     */\n    addResizeAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        $(document).on('resize', '.chat[id$=\\'' + channelLC + '\\']', function() {\n            $(this).find('.chatContent')\n                .css({\n                    'height': 'calc(100% - 105px - ' + $(this)\n                        .find('.chatStream').outerHeight() + 'px )',\n                });\n            $(this).find('.chatViewerlist')\n                .css({\n                    'height': 'calc(100% - 35px - ' + $(this)\n                        .find('.chatStream').outerHeight() + 'px )',\n                });\n        });\n        $('.chat[id$=\\'' + channelLC + '\\']').resizable({\n            handles: 'e',\n            start: function() {\n                $('iframe').css('pointer-events', 'none');\n            },\n            stop: function() {\n                $('iframe').css('pointer-events', 'auto');\n            },\n        });\n        let contentHeightOld =\n            $('.chatContent[id$=\\'' + channelLC + 'scrollArea\\'] .chatMessageList').height();\n        $('.chat[id$=\\'' + channelLC).resize(function() {\n            let $newMessagesInfo = $('.chatNewMessagesInfo[id$=\\'' + channelLC + '\\']');\n            let $chatContent = $('#' + channelLC + ' .chatContent');\n            let $chatContentArea = $('.chatContent[id$=\\'' + channelLC + 'contentArea\\']');\n            if ($newMessagesInfo.is(':hidden') && contentHeightOld <= $chatContentArea.height()) {\n                $chatContent.scrollTop($chatContent[0].scrollHeight + 50);\n                contentHeightOld = $chatContentArea.height();\n            }\n            if ($newMessagesInfo.is(':hidden')) {\n                $chatContent.scrollTop($chatContent[0].scrollHeight + 50);\n            }\n        });\n    }\n    /**\n     * @private\n     */\n    addChatterListAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        let toggleVL = 0;\n        $(document).on('click', '.toggleViewerlist[id$=\\'' + channelLC + '\\']', function() {\n            // if ($(this).parent().parent().find(\"div.chatViewerlist\")\n            // .css(\"display\").toLowerCase() != \"none\") {\n            if (toggleVL % 2 !== 0) {\n                $(this).parent().parent().find('div.chatViewerlist').hide();\n                $(this).parent().parent().find('div.chatContent').show();\n                $(this).parent().parent().find('div.chatInput').show();\n            } else {\n                $(this).parent().parent().find('div.chatContent').hide();\n                $(this).parent().parent().find('div.chatInput').hide();\n                $(this).parent().parent().find('div.chatViewerlist').show();\n\n                let viewerlist =\n                    $(this).parent().parent().find('div.chatViewerlist');\n\n                TwitchApi.getChatterList(channelLC, this, function(data) {\n                    viewerlist.empty();\n                    data = data.data;\n                    viewerlist.append('Chatter Count: ' + data.chatter_count +\n                        '<br /><br />');\n\n                    let chatters = data.chatters;\n                    if (chatters.moderators.length > 0) {\n                        viewerlist.append('<h3>Moderators</h3>');\n                        let modList = '<ul>';\n                        for (let i = 0; i < chatters.moderators.length; i++) {\n                            modList += '<li>' + chatters.moderators[i] + '</li>';\n                        }\n                        modList += '</ul><br />';\n                        viewerlist.append(modList);\n                    }\n                    if (chatters.staff.length > 0) {\n                        viewerlist.append('<h3>Staff</h3>');\n                        let staffList = '<ul>';\n                        for (let i = 0; i < chatters.staff.length; i++) {\n                            staffList += '<li>' + chatters.staff[i] + '</li>';\n                        }\n                        staffList += '</ul><br />';\n                        viewerlist.append(staffList);\n                    }\n                    if (chatters.admins.length > 0) {\n                        viewerlist.append('<h3>Admins</h3>');\n                        let adminsList = '<ul>';\n                        for (let i = 0; i < chatters.admins.length; i++) {\n                            adminsList += '<li>' + chatters.admins[i] + '</li>';\n                        }\n                        adminsList += '</ul><br />';\n                        viewerlist.append(adminsList);\n                    }\n                    if (chatters.global_mods.length > 0) {\n                        viewerlist.append('<h3>Global Mods</h3>');\n                        let globalModsList = '<ul>';\n                        for (let i = 0; i < chatters.global_mods.length; i++) {\n                            globalModsList +=\n                                '<li>' + chatters.global_mods[i] + '</li>';\n                        }\n                        globalModsList += '</ul><br />';\n                        viewerlist.append(globalModsList);\n                    }\n                    if (chatters.viewers.length > 0) {\n                        viewerlist.append('<h3>Viewers</h3>');\n                        let viewersList = '<ul>';\n                        for (let i = 0; i < chatters.viewers.length; i++) {\n                            viewersList += '<li>' + chatters.viewers[i] + '</li>';\n                        }\n                        viewersList += '</ul><br />';\n                        viewerlist.append(viewersList);\n                    }\n                });\n            }\n            toggleVL++;\n        });\n    }\n    /**\n     * @private\n     */\n    addSendMessagesAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        $('.chatInputField[id$=\\'' + channelLC + '\\']').keydown(this, function(event) {\n            if (event.keyCode === 13) {\n                event.preventDefault();\n                if ($(this).val().startsWith('.')\n                    || $(this).val().startsWith('/')) {\n                    event.data.receiveIrcConnection_.send('PRIVMSG #' + channelLC + ' :'\n                        + $(this).val());\n                } else {\n                    event.data.sendIrcConnection_.send('PRIVMSG #' + channelLC\n                        + ' :' + $(this).val());\n                }\n                $(this).val('');\n            } else if (event.keyCode === 9) {\n                event.preventDefault();\n                if ($(this).val().length !== 0 && !$(this).val().endsWith(' ')) {\n                    console.log('WUB');\n                }\n            }\n        });\n    }\n    /**\n     * @private\n     */\n    addNewMessageInfoAbility_() {\n        let channelLC = this.channelName_.toLowerCase();\n        $('.chatNewMessagesInfo[id$=\\'' + channelLC + '\\']').click(function() {\n            $(this).hide();\n            let $chatContent = $('#' + channelLC + ' .chatContent');\n            $chatContent.scrollTop($chatContent[0].scrollHeight);\n        });\n        $('.chatContent[id$=\\'' + channelLC + 'scrollArea\\']').scroll(\n            /* @this HTMLElement */function() {\n                // Bug workaround: unexpected horizontal scrolling\n                // despite overflow-x: hidden\n                if ($(this).scrollLeft() !== 0) {\n                    $(this).scrollLeft(0);\n                }\n                // New messages info scroll behavior\n                if ($(this)[0].scrollHeight - $(this).scrollTop()\n                    < $(this).outerHeight() + 50) {\n                    $('.chatNewMessagesInfo[id$=\\'' + channelLC + '\\']').hide();\n                } else {\n                    $('.chatNewMessagesInfo[id$=\\'' + channelLC + '\\']').show();\n                }\n\n                if ($(this).scrollTop() < 200) {\n                    $('.chatContent[id$=\\'' + channelLC\n                        + 'scrollArea\\'] .chatMessageList')\n                        .children('div:hidden:last').show();\n                }\n            });\n    }\n}\n\nexport default Chat;\n","'use strict';\nimport Chat from './Chat.js';\n\n/**\n * Represents the whole application\n */\nclass ChatManager {\n    /**\n     * Creates the ChatManager\n     * @param {EmoteManager} emoteManager\n     */\n    constructor(emoteManager) {\n        /**\n         * @private\n         * @type {Object.<string, Chat>}\n         */\n        this.chatList_ = {};\n        this.emoteManager_ = emoteManager;\n\n        // Bug workaround: unexpected vertical scrolling\n        // despite overflow-y: hidden\n        $('#main-chat-area').scroll(function() {\n            if ($(this).scrollTop() !== 0) {\n                $(this).scrollTop(0);\n            }\n        });\n    }\n\n    setReceiveIrcConnection(receiveIrcConnection) {\n        this.receiveIrcConnection_= receiveIrcConnection;\n    }\n    setSendIrcConnection(sendIrcConnection) {\n        this.sendIrcConnection_ = sendIrcConnection;\n    }\n\n    /**\n     * Adds the chat messages to the correct chat\n     * @param {Array.<ChatMessage>} chatMessages\n     */\n    addMessages(chatMessages) {\n        for (let i = 0; i < chatMessages.length; i++) {\n            let chatName = chatMessages[i].getChatName().toLowerCase();\n            this.chatList_[chatName].addMessage(chatMessages[i]);\n        }\n    }\n\n    /**\n     * @param {string} channelName\n     * @return {boolean} true if chat already in the chatList\n     */\n    isChatAlreadyAdded(channelName) {\n        return this.chatList_.hasOwnProperty(channelName);\n    }\n\n    /**\n     * Removes the Chat from the chatList_ and the DOM\n     *\n     * @param {Object} event\n     * @private\n     */\n    removeChat_(event) {\n        let channelName = event.data[1].toLowerCase();\n        let thiss = event.data[0];\n        delete thiss.chatList_[channelName];\n        $(document).off('click', '.toggleStream[id$=\\'' + channelName + '\\']');\n        $(this).parent().parent().remove();\n        thiss.receiveIrcConnection_.leaveChat(channelName);\n        thiss.sendIrcConnection_.leaveChat(channelName);\n    }\n\n    /**\n     * Creates new Chat and adds it to the chatList_ if there is not already\n     * a chat with this channelName\n     * @param {string} channelName Name of the channel that will be added\n     */\n    addChat(channelName) { // ToDo: Restructure this method\n        let channelLC = channelName.toLowerCase();\n        if (!this.isChatAlreadyAdded(channelLC)) {\n            this.chatList_[channelLC] = new Chat(channelName, this.emoteManager_,\n                this.receiveIrcConnection_, this.sendIrcConnection_);\n            let chatArea = $('#main-chat-area');\n            chatArea.append(this.chatList_[channelLC].getHtml());\n            this.chatList_[channelLC].addAbilities();\n\n            this.receiveIrcConnection_.joinChat(channelLC);\n            this.sendIrcConnection_.joinChat(channelLC);\n\n            $(document).on('click', '.removeChat[id$=\\'' + channelLC + '\\']',\n                [this, channelName], this.removeChat_);\n\n            // ToDO: Check if .sortable is needed every time\n            chatArea.sortable({\n                handle: '.chatHeader',\n                start(event, ui) {\n                    ui.placeholder.width(ui.item.width());\n                    ui.placeholder.height(ui.item.height());\n                },\n                animation: 300,\n                cursor: 'move',\n                revert: 200,\n                scroll: true,\n                containment: 'parent',\n            });\n        }\n    }\n}\n\nexport default ChatManager;\n","'use strict';\nimport ChatMessage from './ChatMessage.js';\n/**\n * Represents one chat message of a chat user\n */\nclass UserMessage extends ChatMessage {\n    /**\n     * @param {string} chatName Name of the chat the message is for\n     * @param {string} content The actual content of the message\n     * @param {array} badges List of badges shown in front of the name\n     * @param {Array.<string>} emotePositions\n     * @param {string} chatterName Name of the chatter the message is from\n     * @param {string} chatterColor The color of the chatters name in hex #xxxxxx\n     * @param {boolean} action\n     * @param {EmoteManager} emoteManager\n     * @param {BadgeManager} badgeManager\n     * @constructor\n     */\n    constructor(chatName, content, badges, emotePositions, chatterName, chatterColor, action,\n                emoteManager, badgeManager) {\n        super(chatName, content);\n        /** @private */\n        this.badges_ = badges;\n        /** @private */\n        this.emotes_ = emotePositions;\n        /** @private */\n        this.chatterName_ = chatterName;\n        /** @private */\n        this.chatterColor_ = chatterColor;\n        /** @private */\n        this.action_ = action;\n        /** @private */\n        this.emoteManager_ = emoteManager;\n        /** @private */\n        this.badgeManager_ = badgeManager;\n    }\n\n    /**\n     * @return {string} HTML code\n     */\n    getHtml() {\n        let html = this.replaceTwitchEmotesAndEscapeHtml(this.getContent());\n        html = UserMessage.matchURL_(html);\n        html = this.replaceBttvEmotes(html);\n        html = this.replaceFfzEmotes(html);\n        html = this.replaceBadges(html);\n        return html;\n    }\n\n    /**\n     * Replace Twitch emote texts with img html tag\n     * and simultaneously escape the HTML chars in the msg\n     * @param {string} userMessage\n     * @return {string}\n     */\n    replaceTwitchEmotesAndEscapeHtml(userMessage) {\n        // Replace emote texts with images\n        if (this.emotes_[0] !== '' && this.emotes_[0] != null) {\n            let sortEmotes = [];\n            for (let j = 0; j < this.emotes_.length; j++) {\n                let emote = this.emotes_[j].split(':');\n                let emoteId = emote[0];\n                let positions = emote[1].split(',');\n\n                for (let k = 0; k < positions.length; k++) {\n                    sortEmotes.push(\n                        [positions[k].split('-')[0],\n                            positions[k].split('-')[1], emoteId]);\n                }\n            }\n            for (let k = 0; k < sortEmotes.length - 1; k++) {\n                for (let l = k + 1; l < sortEmotes.length; l++) {\n                    if (parseInt(sortEmotes[k][0])\n                        > parseInt(sortEmotes[l][0])) {\n                        let zs = sortEmotes[k];\n                        sortEmotes[k] = sortEmotes[l];\n                        sortEmotes[l] = zs;\n                    }\n                }\n            }\n\n            let diff = 0;\n            let oldAfterEmotePos = 0;\n            for (let k = 0; k < sortEmotes.length; k++) {\n                let oldMessage = userMessage;\n\n                let imgString = userMessage.substring(0, oldAfterEmotePos)\n                    + UserMessage.escapeString_(userMessage.substring(oldAfterEmotePos,\n                        parseInt(sortEmotes[k][0]) + diff)) +\n                    '<span style=\" display: inline-block;\" >&#x200b;' +\n                    '<img src=\\'https://static-cdn.jtvnw.net/emoticons/v1/'\n                    + sortEmotes[k][2] + '/1.0\\' /></span>';\n\n                userMessage = imgString +\n                    userMessage.substring(parseInt(sortEmotes[k][1])\n                        + 1 + diff, userMessage.length);\n                oldAfterEmotePos = imgString.length;\n                // alert(oldAfterEmotePos);\n                // alert(userMessage);\n                diff += userMessage.length - oldMessage.length;\n            }\n        } else {\n            userMessage = UserMessage.escapeString_(userMessage);\n        }\n        return userMessage;\n    }\n\n    /**\n     * Replaces Bttv emote texts with img html tag\n     * @param {string} userMessage\n     * @return {string}\n     */\n    replaceBttvEmotes(userMessage) {\n        // Replace BTTV Global Emotes with img\n        let bttvGlobal = this.emoteManager_.getBttvGlobal();\n        for (let j = 0; j < bttvGlobal.length; j++) {\n            if (bttvGlobal[j].channel == null) {\n                let find = JSON.stringify(bttvGlobal[j].code);\n                find = find.substring(1, find.length - 1);\n                find = '(^|\\\\b|\\\\s)' +\n                    find.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&') + '(?=\\\\s|$)';\n\n                let re = new RegExp(find, 'g');\n\n                let emoteId = JSON.stringify(bttvGlobal[j].id)\n                    .substring(1, JSON.stringify(bttvGlobal[j].id).length - 1);\n                userMessage = userMessage.replace(re,\n                    ' <span style=\" display: inline-block;\" >&#x200b;' +\n                    '<img src=\\'https://cdn.betterttv.net/emote/' + emoteId +\n                    '/1x\\' alt=\\'' + bttvGlobal[j].code + '\\' /></span> ');\n            }\n        }\n        // Replace BTTV Channel Emotes with img\n        let bttvChannels = this.emoteManager_.getBttvChannels();\n        if (bttvChannels.hasOwnProperty(this.chatName_)) {\n            for (let j = 0; j < bttvChannels[this.chatName_].length; j++) {\n                let find = JSON.stringify(bttvChannels[this.chatName_][j].code);\n                find = find.substring(1, find.length - 1);\n                find = '(^|\\\\b|\\\\s)' + find.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&') + '(?=\\\\s|$)';\n\n                let re = new RegExp(find, 'g');\n\n                let emoteId =\n                    JSON.stringify(bttvChannels[this.chatName_][j].id)\n                    .substring(1,\n                        JSON.stringify(\n                            bttvChannels[this.chatName_][j].id).length - 1);\n                userMessage = userMessage.replace(re,\n                    ' <span style=\" display: inline-block;\" >&#x200b;' +\n                    '<img src=\\'https://cdn.betterttv.net/emote/' +\n                    emoteId +\n                    '/1x\\' alt=\\'' +\n                    bttvChannels[this.chatName_][j].code + '\\' />' +\n                    '</span> ');\n            }\n        }\n        return userMessage;\n    }\n    /**\n     * Replaces Ffz emote texts with img html tag\n     * @param {string} userMessage\n     * @return {string}\n     */\n    replaceFfzEmotes(userMessage) {\n        // Replace FFZ Global Emotes with img\n        let ffzGlobal = this.emoteManager_.getFfzGlobal();\n        for (let j = 0; j < ffzGlobal.default_sets.length; j++) {\n            let emoteSetGlobal = ffzGlobal.default_sets[j];\n            let emotesInSetGlobal =\n                ffzGlobal['sets'][emoteSetGlobal]['emoticons'];\n            for (let k = 0; k < emotesInSetGlobal.length; k++) {\n                let find = JSON.stringify(emotesInSetGlobal[k].name);\n                find = find.substring(1, find.length - 1);\n                find = '(^|\\\\b|\\\\s)'\n                    + find.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&')\n                    + '(?=\\\\s|$)';\n\n                let re = new RegExp(find, 'g');\n\n                userMessage = userMessage.replace(re,\n                    ' <span style=\" display: inline-block;\" >&#x200b;' +\n                    '<img src=\\'https:' + emotesInSetGlobal[k]['urls']['1']\n                    + '\\' alt=\\'' + emotesInSetGlobal[k].name + '\\' />' +\n                    '</span> ');\n            }\n        }\n        // Replace FFZ Channel Emotes with img\n        let ffzChannels = this.emoteManager_.getFfzChannels();\n        if (ffzChannels.hasOwnProperty(this.chatName_)) {\n            let ffzChannelId = ffzChannels[this.chatName_]['room']['_id'];\n            if (ffzChannels[this.chatName_]['sets'][ffzChannelId] != null) {\n                let ffzChannelEmoteSet =\n                    ffzChannels[this.chatName_]['sets'][ffzChannelId]['emoticons'];\n                for (let j = 0; j < ffzChannelEmoteSet.length; j++) {\n                    let find = JSON.stringify(ffzChannelEmoteSet[j].name);\n                    find = find.substring(1, find.length - 1);\n                    find = '(^|\\\\b|\\\\s)'\n                        + find.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&')\n                        + '(?=\\\\s|$)';\n\n                    let re = new RegExp(find, 'g');\n\n                    userMessage = userMessage.replace(re,\n                        ' <span style=\" display: inline-block;\" >&#x200b;' +\n                        '<img src=\\'https:' + ffzChannelEmoteSet[j]['urls']['1']\n                        + '\\' alt=\\'' + ffzChannelEmoteSet[j].name + '\\' />' +\n                        '</span> ');\n                }\n            }\n        }\n        return userMessage;\n    }\n\n    /**\n     * Puts badges img tags in the message\n     * @param {string} userMessage\n     * @return {string}\n     */\n    replaceBadges(userMessage) {\n        let newElement;\n        if (this.action_) {\n            newElement = $('<li><span style=\"color: gray;font-size: 11px;\">'\n                + this.getTimestamp() + '</span><span style=\"color: ' + this.chatterColor_\n                + ';font-weight: bold;\"> ' + this.chatterName_ + '</span>' +\n                ' <span style=\"color: ' + this.chatterColor_ + ';\">'\n                + userMessage + '</span></li>');\n        } else {\n            newElement = $('<li><span style=\"color: gray;font-size: 11px;\">'\n                + this.getTimestamp() + '</span><span style=\"color: ' + this.chatterColor_\n                + ';font-weight: bold;\"> ' + this.chatterName_ + '</span>: '\n                + userMessage + '</li>');\n        }\n\n        // Put badges in message\n        for (let j = 0; j < this.badges_.length; j++) {\n            let badge = this.badges_[j].split('/');\n            let badgeGroup = this.badgeManager_.getBadgesChannels()[this.chatName_][badge[0]];\n            if (badge[0].localeCompare('subscriber') === 0) {\n                newElement.find('span:nth-of-type(2):first').before(\n                    '<div style=\" display: inline-block;' +\n                    'vertical-align: -32%;border-radius: 2px;' +\n                    'background-image: url(' +\n                    badgeGroup['versions'][badge[1]]['image_url_1x']\n                    + ');\" ></div>');\n            } else {\n                newElement.find('span:nth-of-type(2):first').before(\n                    '<div style=\" display: inline-block;' +\n                    'vertical-align: -32%;border-radius: 2px;' +\n                    'background-image: url(' +\n                    this.badgeManager_\n                        .getBadgesGlobal()[badge[0]]['versions'][badge[1]]['image_url_1x']\n                    + ');\"></div>');\n            }\n        }\n        return newElement;\n    }\n\n    /**\n     * Searches for URLs in the given String and replaces them with the\n     * proper <a href=\"\"> HTML Tag\n     * @param {string} txt - Text in which the links get searched\n     * @return {string} Text with <a href=\"\"> HTML Tags\n     * @private\n     */\n    static matchURL_(txt) {\n        let pattern =\n            /((^|\\s|&#32;)(http(s)?:\\/\\/.)?(www\\.)?([-a-zA-Z0-9@:%_+~#=]|\\.(?!\\.)){2,256}\\.[a-z]{2,8}\\b([-a-zA-Z0-9@:%_+.~#?&/=]*))(?=(\\s|$|&#32;))/g;\n        txt = txt.replace(pattern, function(str, p1) {\n            let addScheme = p1.indexOf('http://') === -1\n                && p1.indexOf('https://') === -1;\n            let link = ' <a href=\"'\n                + (addScheme ? 'http://' : '')\n                + p1 + '\" target=\"_blank\">' + p1 + '</a>';\n            if (p1.startsWith(' ')) {\n                link = ' <a href=\"'\n                    + (addScheme ? 'http://' : '') +\n                    p1.substring(1, p1.length) + '\" target=\"_blank\">' + p1 + '</a>';\n            } else if (p1.startsWith('&#32;')) {\n                link = ' <a href=\"'\n                    + (addScheme ? 'http://' : '') +\n                    p1.substring(5, p1.length) + '\" target=\"_blank\">' + p1 + '</a>';\n            }\n            return link;\n        });\n        return txt;\n    }\n\n    /**\n     * Escape HTML characters in the message before adding to the chat\n     * @param {string} txt message to escape\n     * @return {string} escaped message\n     * @private\n     */\n    static escapeString_(txt) {\n        return txt.replace(/&/g, '&amp;').replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;').replace(/\"/g, '&quot;')\n            .replace(/`/g, '&#96;').replace(/!/g, '&#33;')\n            .replace(/@/g, '&#64;').replace(/\\$/g, '&#36;')\n            .replace(/%/g, '&#37;').replace(/=/g, '&#61;')\n            .replace(/\\+/g, '&#43;').replace(/{/g, '&#123;')\n            .replace(/}/g, '&#125;').replace(/\\[/g, '&#91;')\n            .replace(/]/g, '&#93;');\n    }\n}\nexport default UserMessage;\n","/**\n * @param data\n * @param data.getUsers\n * @param data.getUsers.display_name\n * @param data.logo\n * @param ffzGlobal.default_sets\n * @param data.chatter_count\n * @param data.chatters\n * @param chatters.moderators\n * @param chatters.viewers\n * @param chatters.global_mods\n * @param chatters.admins\n * @param chatters.staff\n */\n\n\n'use strict';\n\nimport ChatMessage from './ChatMessage.js';\nimport RoomstateMessage from './RoomstateMessage.js';\nimport UserMessage from './UserMessage.js';\nimport NameColorManager from './NameColorManager.js';\n\n/**\n * Parser for parsing IRC messages sent by Twitch\n */\nclass MessageParser {\n    /**\n     * @param {Object.<NameColorManager>} nameColorManager\n     * @param {EmoteManager} emoteManager\n     * @param {BadgeManager} badgeManager\n     * @constructor\n     */\n    constructor(nameColorManager, emoteManager, badgeManager) {\n        /** @private */\n        this.nameColorManager_ = nameColorManager;\n        /** @private */\n        this.emoteManager_ = emoteManager;\n        /** @private */\n        this.badgeManager_ = badgeManager;\n    }\n\n    /**\n     * Parses an IRC message from Twitch and appends it to the corresponding chat.\n     *\n     * @param {string} msg Single raw chat message sent by Twitch\n     * @return {Array.<ChatMessage>} Array of ChatMessage and UserMessage\n     */\n    parseMessage(msg) {\n        let msgParts = msg.split(' ');\n\n        let chatName = MessageParser.parseChatName_(msgParts);\n\n        if (msgParts[2].localeCompare('WHISPER') === 0) {\n            // ToDo: Implement whisper\n            return [];\n        } else if (msgParts[2].startsWith('GLOBALUSERSTATE')) {\n            return [];\n        } else if (chatName.length < 1) {\n            // console.log('Message with no Chat specified: ' + msg);\n            return [];\n        }\n        /** @type {Array.<ChatMessage>} */\n        let chatMessages = [];\n        if (msgParts[1].localeCompare('JOIN') === 0) {\n            // Ignore JOINs (a user joined a channel)\n        } else if (msgParts[1].localeCompare('PART') === 0) {\n            // Ignore PARTs (a user left a channel)\n        } else if (msgParts[1].localeCompare('353') === 0) {\n            // Ignore namelist\n        } else if (msgParts[1].localeCompare('366') === 0) {\n            // Ignore end of namelist\n        } else if (msgParts[1].localeCompare('MODE') === 0) {\n            // Ignore gain/lose of Moderator rights\n        } else if (msgParts[2].localeCompare('ROOMSTATE') === 0) {\n            chatMessages = MessageParser.parseRoomstate_(msg, chatName);\n        } else if (msgParts[2].localeCompare('USERSTATE') === 0) {\n            // Ignore Userstate\n        } else if (msgParts[2].localeCompare('USERNOTICE') === 0) {\n            chatMessages = this.parseUsernotice_(msg, chatName);\n        } else if (msgParts[2].localeCompare('CLEARCHAT') === 0) {\n            // ToDo: Bans/Timeouts\n        } else if (msgParts[1].localeCompare('HOSTTARGET') === 0) {\n            // Ignore hosting message\n        } else if (msgParts[2].localeCompare('NOTICE') === 0\n            || msgParts[1].localeCompare('PRIVMSG') === 0) {\n            chatMessages = MessageParser.parseNotice_(msgParts, chatName);\n        } else if (msgParts[2].localeCompare('PRIVMSG') === 0) {\n            chatMessages = this.parsePrivmsg_(msgParts, chatName);\n        } else if (chatName.length >= 1) {\n            chatMessages = [new ChatMessage(chatName, msg)];\n        } else {\n            alert('Error');\n        }\n        return chatMessages;\n    }\n\n    /**\n     * @param {Array} msgParts\n     * @param {string} chatName channel the ROOMSTATE belongs to\n     * @return {Array.<ChatMessage>} newMessages\n     */\n    parsePrivmsg_(msgParts, chatName) {\n        let username = msgParts[1].split('!', 1);\n        username = username[0].substring(1, username[0].length);\n\n        let userMessage = msgParts;\n        let metaInfoRaw = userMessage[0].substring(1, userMessage[0].length);\n        let metaInfo = this.getMetaInfoWithColor_(metaInfoRaw.split(';'), username);\n        if (metaInfo.username != null) {\n            username = metaInfo.username;\n        }\n\n        userMessage = userMessage.slice(4).join(' ');\n        userMessage = userMessage.substring(1, userMessage.length);\n\n        let action = false;\n        if (userMessage.startsWith('\\x01ACTION')) {\n            action = true;\n            userMessage = userMessage.substring(8, userMessage.length - 2);\n        }\n        let messageContent = userMessage;\n        let emotePositions = metaInfo.emotes;\n        let badges = metaInfo.badges;\n        let color = metaInfo.color;\n        return [\n            new UserMessage(chatName, messageContent, badges,\n                emotePositions, username, color, action, this.emoteManager_, this.badgeManager_),\n        ];\n    }\n\n    /**\n     * @param {string} msg ROOMSTATE message\n     * @param {string} chatName channel the ROOMSTATE belongs to\n     * @return {Array.<ChatMessage>} newMessages\n     * @private\n     */\n    static parseRoomstate_(msg, chatName) {\n        let roomstateMsg = msg.split(' ')[0];\n        roomstateMsg = roomstateMsg.substring(1, roomstateMsg.length);\n        roomstateMsg = roomstateMsg.split(';');\n        let infoMessage = '';\n        let chatInput = $('#' + chatName + ' .chatInput');\n        chatInput.find('p').remove();\n        for (let j = 0; j < roomstateMsg.length; j++) {\n            let info = roomstateMsg[j].split('=');\n            let infoKeyword = info[0];\n            switch (infoKeyword) {\n                case 'broadcaster-lang':\n                    infoMessage += info[1] + '  ';\n                    break;\n                case 'emote-only':\n                    if (info[1].localeCompare('1') === 0) {\n                        infoMessage += 'EMOTE-ONLY  ';\n                    }\n                    break;\n                case 'followers-only':\n                    if (info[1].localeCompare('-1') !== 0) {\n                        infoMessage += 'FOLLOW ' + info[1] + 'm  ';\n                    }\n                    break;\n                case 'r9k':\n                    if (info[1].localeCompare('1') === 0) {\n                        infoMessage += 'R9K  ';\n                    }\n                    break;\n                case 'slow':\n                    if (info[1].localeCompare('0') !== 0) {\n                        infoMessage += 'SLOW ' + info[1] + 's  ';\n                    }\n                    break;\n                case 'subs-only':\n                    if (info[1].localeCompare('1') === 0) {\n                        infoMessage += 'SUB  ';\n                    }\n                    break;\n            }\n        }\n        return [new RoomstateMessage(chatName, infoMessage)];\n    }\n\n    /**\n     * @param {string} msg USERNOTICE message\n     * @param {string} chatName channel the ROOMSTATE belongs to\n     * @return {Array.<ChatMessage>} newMessages\n     * @private\n     */\n    parseUsernotice_(msg, chatName) {\n        let chatMessages = [];\n\n        let usernoticeMessage = msg.split(' ');\n        usernoticeMessage = usernoticeMessage.slice(4).join(' ');\n        let metaInfoRaw = msg.substring(1, msg.length).split(' ')[0].split(';');\n        let metaInfo = MessageParser.getMetaInfo_(metaInfoRaw);\n        chatMessages.push(new ChatMessage(chatName,\n            ((metaInfo.systemMsg != null) ? (metaInfo.systemMsg + ' ') : '')));\n        if (usernoticeMessage.length > 0) {\n            chatMessages.push(this.parseMessage(msg.split(' ')[0] + ' :' +\n                metaInfo.username.toLowerCase() + '!' +\n                metaInfo.username.toLowerCase() + '@' +\n                metaInfo.username.toLowerCase() + '.tmi.twitch.tv PRIVMSG #'\n                + chatName + ' ' + usernoticeMessage)[0]);\n        }\n        return chatMessages;\n    }\n\n    /**\n     * @param {Array.<string>} msgParts\n     * @param {string} chatName channel the ROOMSTATE belongs to\n     * @return {Array.<ChatMessage>} newMessages\n     * @private\n     */\n    static parseNotice_(msgParts, chatName) {\n        let noticeMessage = msgParts;\n        let slicePoint = msgParts[2].localeCompare('NOTICE') === 0 ? 4 : 3;\n        noticeMessage = noticeMessage.slice(slicePoint).join(' ');\n        return [new ChatMessage(chatName, noticeMessage.substring(1, noticeMessage.length))];\n    }\n\n    /**\n     * @param {Array.<string>} msgParts\n     * @return {string} chatName the message belongs to\n     * @private\n     */\n    static parseChatName_(msgParts) {\n        let chatName = '';\n        // Parse chat channel name the message is for\n        for (let j = 0; j < msgParts.length; j++) {\n            if (msgParts[j].startsWith('#')) {\n                chatName = msgParts[j].slice(1, msgParts[j].length);\n                chatName = chatName.trim();\n                break;\n            }\n        }\n        return chatName;\n    }\n\n    /**\n     * Parses the meta information part of a chat message.\n     *\n     * @param {string[]} metaMsg [{@badges=<badges>},{color=<color>},...]\n     * @param {string} username user from whom the message was sent\n     * @return {Object} Object with one property for every meta information\n     * @private\n     */\n    getMetaInfoWithColor_(metaMsg, username) {\n        let metaInfo = {};\n\n        metaInfo.color = '#acacbf';\n        metaInfo.emotes = '';\n        metaInfo.badges = '';\n\n        let gotColor = false;\n        for (let j = 0; j < metaMsg.length; j++) {\n            let info = metaMsg[j].split('=');\n            if (info.length <= 1 || info[1].localeCompare('') === 0) {\n                continue;\n            }\n\n            if (info[0].localeCompare('color') === 0) {\n                metaInfo.color = info[1];\n                if (metaInfo.color.localeCompare('') === 0\n                    && !(this.nameColorManager_.getUserColors().hasOwnProperty(username))) {\n                    metaInfo.color = this.nameColorManager_.randomColor();\n                    this.nameColorManager_.addUserColor(username, metaInfo.color);\n                } else if (metaInfo.color.localeCompare('') === 0\n                    && this.nameColorManager_.getUserColors().hasOwnProperty(username)) {\n                    metaInfo.color = this.nameColorManager_.getUserColors()[username];\n                }\n                gotColor = true;\n            } else if (info[0].localeCompare('display-name') === 0) {\n                metaInfo.username = info[1];\n            } else if (info[0].localeCompare('emotes') === 0) {\n                metaInfo.emotes = info[1].split('/');\n            } else if (info[0].localeCompare('badges') === 0) {\n                metaInfo.badges = info[1].split(',');\n            } else if (info[0].localeCompare('system-msg') === 0) {\n                metaInfo.systemMsg = info[1].replace(/\\\\s/g, ' ');\n            } else if (info[0].localeCompare('emote-sets') === 0) {\n                metaInfo.emoteSets = info[1].split(',');\n            }\n        }\n\n        if (!gotColor) {\n            if (this.nameColorManager_.getUserColors().hasOwnProperty(username)) {\n                metaInfo.color = this.nameColorManager_.getUserColors()[username];\n            } else {\n                metaInfo.color = NameColorManager.randomColor();\n                this.nameColorManager_.addUserColor(username, metaInfo.color);\n            }\n        }\n\n        // Color contrast correction\n        metaInfo.color = NameColorManager.colorCorrection(metaInfo.color);\n\n        return metaInfo;\n    }\n\n    /**\n     * Parses the meta information part of a chat message.\n     *\n     * @param {string[]} metaMsg [{@badges=<badges>},{color=<color>},...]\n     * @return {Object} Object with one property for every meta information\n     * @private\n     */\n    static getMetaInfo_(metaMsg) {\n        let metaInfo = {};\n\n        metaInfo.emotes = '';\n        metaInfo.badges = '';\n\n        for (let j = 0; j < metaMsg.length; j++) {\n            let info = metaMsg[j].split('=');\n            if (info.length <= 1 || info[1].localeCompare('') === 0) {\n                continue;\n            }\n\n            if (info[0].localeCompare('display-name') === 0) {\n                metaInfo.username = info[1];\n            } else if (info[0].localeCompare('emotes') === 0) {\n                metaInfo.emotes = info[1].split('/');\n            } else if (info[0].localeCompare('badges') === 0) {\n                metaInfo.badges = info[1].split(',');\n            } else if (info[0].localeCompare('system-msg') === 0) {\n                metaInfo.systemMsg = info[1].replace(/\\\\s/g, ' ');\n            } else if (info[0].localeCompare('emote-sets') === 0) {\n                metaInfo.emoteSets = info[1].split(',');\n            }\n        }\n        return metaInfo;\n    }\n}\nexport default MessageParser;\n","/**\n * @param data.emoticon_sets\n * @param data.badge_sets\n */\n\n\n'use strict';\nimport AppUser from './AppUser.js';\n// noinspection ES6CheckImport\nimport {version} from '../../package.json';\nimport SendIRCConnection from './SendIRCConnection.js';\nimport ReceiveIRCConnection from './ReceiveIRCConnection.js';\nimport BadgeManager from './BadgeManager.js';\nimport EmoteManager from './EmoteManager.js';\nimport NameColorManager from './NameColorManager.js';\nimport FavoritesList from './FavoritesList.js';\nimport ChatManager from './ChatManager.js';\nimport MessageParser from './MessageParser.js';\n\n/**\n * Represents the whole application\n */\nclass App {\n    /**\n     * Created the whole application\n     * @constructor\n     */\n    constructor() {\n        document.title += ` ${version}`;\n        /** @private */\n        this.appUser_ = new AppUser();\n        /** @private */\n        this.nameColorManager_ = new NameColorManager();\n        /** @private */\n        this.badgeManager_ = new BadgeManager();\n        /** @private */\n        this.emoteManager_ = new EmoteManager(this.appUser_);\n        /** @private */\n        this.chatManager_ = new ChatManager(this.emoteManager_);\n        /** @private */\n        new FavoritesList(this.badgeManager_, this.emoteManager_, this.chatManager_);\n        /** @private */\n        this.sendIrcConnection_ = new SendIRCConnection(this.appUser_);\n        /** @private */\n        this.receiveIrcConnection_ = new ReceiveIRCConnection(this.appUser_,\n            new MessageParser(this.nameColorManager_, this.emoteManager_, this.badgeManager_),\n            this.chatManager_);\n        this.chatManager_.setReceiveIrcConnection(this.receiveIrcConnection_);\n        this.chatManager_.setSendIrcConnection(this.sendIrcConnection_);\n    }\n}\n\nexport default App;\n","'use strict';\nimport App from './app/App.js';\nimport TwitchConstants from './app/TwitchConstants.js';\n\nlet url = window.location.href;\nlet urlMainAndTail = url.split('#');\nlet urlTailParts;\n\nif (urlMainAndTail.length > 1) {\n    urlTailParts = urlMainAndTail[1].split('&');\n    localStorage.accessToken = urlTailParts[0].split('=')[1];\n} else if (localStorage.getItem('accessToken') !== null) {\n} else {\n    window.location.replace(TwitchConstants.AUTHORIZE_URL);\n}\n\n$(function() { // this will be called when the DOM is ready\n    new App();\n});\n\n\n"],"names":[],"mappings":"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"}